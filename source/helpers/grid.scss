// GRID
// Generate bespoke grids.
// -----------------------------------------------------------------------------

// Use as argument a grid definition established via layout settings.
@mixin grid($grid-definition) {
  display: grid;

  @each $breakpoint-name, $grid-properties in $grid-definition {
    @include breakpoint($breakpoint-name) {
      // Provide a breakpoint suffix only if the argument is a breakpoint name
      // established via viewport settings.
      $breakpoint-prefix: if(
        $breakpoint-name != "default",
        #{$breakpoint-name}\:,
        null
      );
      $column-count: nth($grid-properties, 1);
      $gap-size: nth($grid-properties, 2);

      grid-template-columns: repeat($column-count, 1fr);
      grid-gap: $gap-size;

      @for $i from 1 through $column-count {
        @at-root .#{$breakpoint-prefix}grid__column-#{$i} {
          grid-column: span #{$i};
        }
      }
    }
  }
}
